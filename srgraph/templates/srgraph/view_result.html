{% extends 'base.html' %}
{% load crispy_forms_tags %}
{% block head_extra %}
{{ form.media }}
{% endblock %}

<script>
{% block jquery %}
		$(document).ready(function(){


$("#sr1-random").click(function(){
  this_ = $(this).parent().parent().children().first()
  $.get('/api/get_random/', function(data, status) {
    this_.val(data)
  })
})

$("#sr2-random").click(function(){
  this_ = $(this).parent().parent().children().first()
  $.get('/api/get_random/', function(data, status) {
    this_.val(data)
  })
})



$(function() {
  $("#subreddit1").autocomplete({
    source: "/api/get_subreddits/",
    minLength: 2,
  });
  $("#subreddit2").autocomplete({
    source: "/api/get_subreddits/",
    minLength: 2,
  });
});

})
{% endblock %}
</script>

{% block content %}

<h2>result for {{ result }}</h2>

content here

<form method="GET" action=".">
  <div class="row button-wrapper">
    <div class="col-md-5">
      <div class="input-group">
  <input id="subreddit1" class="form-control" type="text" name="sr1" value='{{ request.GET.sr1 }}' placeholder="start typing a subreddit...">
      <span class="input-group-btn">
        <button id="sr1-random" class="btn btn-default" type="button">random 🔄</button>
      </span>
    </div>
</div>

<div class="col-md-5">
  <div class="input-group">
    <input id="subreddit2" class="form-control" type="text" name="sr2" value='{{ request.GET.sr2 }}' placeholder="type another subreddit">
    <span class="input-group-btn">

      <button id="sr2-random" class="btn btn-default" type="button">random 🔄</button>
    </span>
  </div>
  </div>
  <div class="col-md-2">
    <input type="submit" class="btn btn-info" value="find the shortest path 🔎"></input>
  </div>
  </div>
</form>


<!-- {% if search_result %}
<h2>shortest path</h2>
<br />
<div class="button-wrapper" style="text-align:center;">
{% for item in search_result.collection %}
👉 <a class='btn btn-default button-wrapper' href="{{ item.reddit_link }}">{{ item }}</a>
{% endfor %}
</div>
{% endif %}


{% if search_result %}
<h2>shortest path</h2>
<br />
<div class="button-wrapper" style="text-align:center;">
{% for item in search_result.get_list %}
👉 <a class='btn btn-default button-wrapper' href="{{ item.reddit_link }}">{{ item }}</a>
{% endfor %}
</div>
{% endif %} -->

<hr>

<h2 style="text-align:center;">recent searches</h2>
<br />
{% for search_result in previous_searches %}

<div class="row" style="font-size:1.25em; text-align:center;">
  <div class="col-md-3"></div>
  <div style="text-align:center;" class="col-md-2">
  <a class="btn btn-success" href="{{ search_result.s_one.reddit_link }}">{{ search_result.s_one }}</a>
</div>
<div class="col-md-2">
➡️&nbsp;
</div>
<div style="text-align:center;" class="col-md-2">
<a class="btn btn-danger" href="{{ search_result.s_two.reddit_link }}">{{ search_result.s_two }}</a>
</div>
<div class="col-md-3"></div>
</div>
<!-- <div class="col-md-3">
  <a href="{{ search_result.s_one.reddit_link }}">{{ search_result.s_one }}</a></div> -->
  <!-- <div class="col-md-0.5 col-md-offset-5.5" style="text-align:center;">➡️</div> -->
  <!-- <div class="col-md-3"><a href="{{ search_result.s_two.reddit_link }}">{{ search_result.s_two }}</a></div> -->
<span style="text-align:center;">
<p>
<p style="font-size:1.5em;"><a href="{% url 'srgraph:upvote' pk=result.pk %}">👍</a>&nbsp;&nbsp;{{ search_result.votes }}i <a href="{% url 'srgraph:downvote' pk=result.pk %}">👎</a>&nbsp;&nbsp;</p>
</span>



<div style="text-align:center;" class="button-wrapper">
{% for sr in result.get_list %}
<span style="font-size:1.25em;">👉</span> <a class="btn btn-default" href="{{ sr.reddit_link }}">{{ sr }}</a>
{% endfor %}
</div>
<div style="text-align:center;">
<small>searched {{ search_result.updated | timesince }} ago</small>
</div>

<hr>
{% endfor %}

{% endblock %}
